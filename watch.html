<script src="header.js"></script>

<div id="watch-box"><br/><br/><br/><br/>
    <div id="box-container">
        <div class="sub-box">
            <div class="sub-box-one">
                <img src="https://m.media-amazon.com/images/M/MV5BMjAzMTEwMDUwM15BMl5BanBnXkFtZTgwNDIyODM0MDE@._V1_UX224_CR0,0,224,126_AL_.jpg">
                <div id="grad-box"></div><h3>• S01E01 •</h3>
            </div>
            <div class="sub-box-two">
                <h3>The One where it all started</h3>
                <p>Ross finds out his ex-wife is pregnant. Rachel returns her engagement ring to Barry. Monica becomes stressed when her and Ross's parents come to visit.</p>
                <b>Airdate: 21st August, 1997</b>
            </div>
        </div>
    </div>
</div>

<script>
    const nav_watch = document.getElementById("nav-watch");
    nav_watch.firstElementChild.style.color = "var(--primary-color)";

    var field = 'season';
    var url = window.location.href;

    if (url.indexOf('?' + field + '=') != -1) {
        var url = new URL(url);
        var season_num = url.searchParams.get("season");
        document.write('<link rel="stylesheet" href="css/watch_epi.css" />');
        //document.getElementById("watch-box").innerHTML = '<link rel="stylesheet" href="css/watch_epi.css" /><br/><h2 id="friends_season_text">Season ' + season_num + '</h2><br/><div id="box-container"></div>';
        
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var jf = JSON.parse(this.responseText);
                var about = jf["about"];
                var timeline = '';
                for (var i in jf["timeline"]) {

                    timeline += jf["timeline"][i]["title"];
                }
                //document.getElementById("box-container").innerHTML = timeline;
            }
        };
        xhttp.open("GET", "j/s"+season_num+".json", true);
        xhttp.send();
        
    } else {
        document.getElementById("watch-box").innerHTML = '<link rel="stylesheet" href="css/watch_home.css" /><br/><h2 id="friends_season_text">F.R.I.E.N.D.S</h2><p id="which_season_text">Which season you wanna watch?</p><br/><div id="box-container"></div>';
        var s = "";
        var s_line = ["Hey, How you<br/>doing?", "When were you<br/>under me?", "WE WERE ON<br/>A BREAK!", "15 Yemen Rd,<br/>Yemen", "They don't know<br/>that we know", "Ah, salmon skin<br/>roll", "It's like a cow's<br/>opinion. It's moo", "You've been<br/>BAMBOOZLED!", "www.haha-not<br/>so-much.com!", "Was that place<br/>THE SUN?"];
        var s_color = ['--primary-', '--success-', '--warning-', '--primary-', '--danger-', '--light-', '--warning-', '--success-', '--danger-', '--light-'];
        for (var i = 1; i <= 10; i++) {
            s += '<div class="season-box" style="background-color:var(' + s_color[i-1] + 'bg);"><a href="watch.html?season=' + i + '"><h2>Season ' + i + '</h2><p style="color: var(' + s_color[i-1] + 'color); font-weight: normal;">' + s_line[i-1] + '</p><img src="img/s/s' + i + '_1.png" class="season-img si-left"><img src="img/s/s' + i + '_2.png" class="season-img si-right"></a></div>';
        }
        document.getElementById("box-container").innerHTML = s;
    }
    
</script>

</body>

</html>
